@(theme: Int, appAppearance: models.AppAppearance, appConfiguration: AppConfiguration)(implicit user: Option[securesocial.core.Identity])
@main("Administration") {

    <script src="@routes.Assets.at("javascripts/errorRedirect.js")" type="text/javascript"></script>
    
	<div class="page-header">
		<h1>Administration</h1>
	</div>
	
	<legend>Select a Theme</legend>
	
	<div class="row">
		<div class="col-md-2">@themes(theme)</div>
	</div>
	
	<legend>Select a display name for the application and a welcoming message</legend>
	
	<div class="row">
		<div class="col-md-2">
			<form role="form-horizontal">
			  <div class="form-group">
			    <label for="displayNameField">Display name</label>
			    <input id="displayNameField" name="displayNameField" type="text" value="@(appAppearance.displayedName)"></input>
			    <span id="displayNameField_error" style="display:none;">Must have a display name</span>
			    <br /><br />
			    <label for="welcomingField">Welcoming message</label>
				<textarea name="welcomingField" id="welcomingField" style="width:300%;">@(appAppearance.welcomeMessage)</textarea>
				<br /><br />
				<button class="btn btn-default" onclick="return submitAppearance();">Submit</button>	
			  </div>
			</form>			
		</div>
	</div>
	<script language="javascript">
		function submitAppearance(){
			var displayName = $("#displayNameField").val().trim();
			var welcomeMessage = $("#welcomingField").val().trim();
			
			if(displayName == ""){
				$("#displayNameField_error").css("display","inline");
				return false;
			}else{
				$("#displayNameField_error").css("display","none");
			}
			
			console.log("Display name: "+displayName);
			console.log("Welcoming message: "+welcomeMessage);
			
			var request = $.ajax({
				url:  "@api.routes.Admin.submitAppearance",
				data: JSON.stringify({ displayName: displayName, welcomeMessage: welcomeMessage}),
				type: "POST",
				contentType: "application/json",
	     	});
			request.done(function (response, textStatus, jqXHR){ 
				console.log("Response: " + response);
				alert("Done");
			});
			request.fail(function (jqXHR, textStatus, errorThrown){
				console.error("The following error occured: " + textStatus, errorThrown);
				alert("The application appearance was not updated due to : " + errorThrown);
			});						
			return false;			
		}
	</script>

	
	<legend>Create an Index</legend>
	
	<div class="container-fluid">        
      <div class="row">      
       <div class="col-md-12">
       
     
			<div class="col-md-3">
	  
       			<h5>Choose file type</h5>
					<select id="fileTypeDropDown" onchange="setFileTypeAndAvailableAdapters()">
					<option value="invalid">--File Type--</option>
					<option value="image">Image</option>
					<option value="jpeg">Image-jpeg</option>
					<option value="png">Image-png</option>
					<option value="pdf">PDF</option>
					<option value="doc">Doc</option>
					<option value="rtf">RTF</option>
					</select>
			</div>
	
	
	
       
			<div class="col-md-3">
				<h5>Choose an Adapter</h5>
				<select id="adapterDropDown" onchange="setAdapterTypeAndAvailableExtractors()">
					<option value="invalid">--Adapter--</option>
				</select>
				<div style="text-align: left;">			
      			 <input id="create" type="submit" class="btn btn-default btn-sm" value="Create" />
      			 </div>
      			 <br>
      			 <br>
      			 <div id="createIndex"style="text-align: left;">
      			 </div>				
			</div>		
				
		<div class="col-md-3">	
			<h5>Choose an Extractor</h5>
				<select id="extractorDropDown" onchange="setExtractorTypeAndAvailableMeasures()">
					<option value="invalid">--Extractor--</option>
				</select>	
	 		</div>
	 		
	 		<div class="col-md-3" style="margin-right:5px;">
				<h5>Choose a Measure</h5>
				<select id="measureDropDown" onchange="setMeasureType()">
					<option value="invalid">--Measure--</option>
				</select>
				
			</div>
			<div class="col-md-3">
				<h5>Choose an Indexer </h5>
				<select id="indexer" onchange="setIndexerState()">
					<option value="invalid">--Indexer--</option>
				</select>
				
			</div>
  		</div>
	</div>
</div>
<br>
<br>

 

<br>
<br>
<legend> Build an Index</legend>
<div class="row">
	   <div class="col-md-12">
	   	<div class="col-md-3">
				<h5>Choose an Index </h5>
				<select id="index" onchange="setIndexState()">
					<option value="invalid">--Index--</option>
				</select>
				<div style="text-align: left;">
				<input id="build" class="btn btn-default btn-sm" type="submit" value="Build Index">
				</div>
				<div id="buildIndex"style="text-align: left;">
      			 </div>
		</div>		
	</div>
</div>

<br>
<br>

<legend> List All Index</legend>
<div class="row">
<div class="col-md-12">
	   <div style="text-align: left;">			
       <input id="list" type="submit" class="btn btn-default btn-sm" value="List All Indexes" />
       </div>
       <div id="list1">
       </div>
    </div>
</div>
<br>
<br>
<legend> Delete an Index</legend>
<div class="row">
	   <div class="col-md-12">
	   	<div class="col-md-3">
				<h5>Choose an Index </h5>
				<select id="indexDel" onchange="setIndexDelState()">
					<option value="invalid">--Index--</option>
				</select>
				<div style="text-align: left;">
				<input id="delete" class="btn btn-default btn-sm" type="submit" value="Delete Index">
				</div>
				<br>
				<br>
				<div id="deleteIndex"style="text-align: left;">
      			 </div>
		</div>		
	</div>
</div>
<br>
<div class="row">
<div class="col-md-12">
	   <div style="text-align: left;">			
       <input id="deleteAll" type="submit" class="btn btn-default btn-sm btn-danger" value="Delete All" />
       </div>
         <div id="deleteAllIndex"style="text-align: left;">
      </div>
   </div>  
</div>
	


<script language="javascript">

var fileTypeList = [];
var fileTypeState = false;
var fileTypeSelected;

var allAdapterList=[];
var shortAdapterList=[];

var allExtractorList=[];
var shortExtractorList=[];

var allMeasureList=[];
var shortMeasureList=[];



var adapterState= false;
var extractorState=false;
var measureState= false;

var adapterSelected;
var extractorSelected;
var measureSelected;

var indexerState=false;
var indexState=false;
var indexerselected;
var indexselected="";

var indexerList=[];
var indexList=[];

//$(document).ready(function setAvailableFileTypes(){
//	getFileTypes();//global car allAdapterList is now set
//});

$(document).ready(function setAvailableAdapters(){
	getAllAdapters();//global car adapterList is now set
});

$(document).ready(function setAvailableExtractors(){
	getAllExtractors();//global var allExtractorList is now set
});

//set the measure options, pulled from the versus server
$(document).ready(function setAvailableMeasures(){
	getAllMeasures();//global  allMeasureList is now set
});

//set the indexer options, pulled from the versus server
$(document).ready(function setAvailableIndexer(){
	getIndexers();//global  indexerList is now set
});

//set the indexer options, pulled from the versus server
$(document).ready(function setAvailableIndexes(){	
	getIndexes();//global  indexerList is now set
});


function getAllAdapters() {
$.ajax({
            type : "GET",
            url : "@routes.Admin.getAdapters()",
            dataType : "json",
            success : function(data) {            	             
                setAllAdapterList(data);
            },
            error : function(xhr, textStatus, errorThrown) {
                console.log('Make call failed - getAllAdapters ' +  errorThrown);
            }
        });
}


function getAllExtractors() {
		$.ajax({
            type : 'GET',
            url : "@routes.Admin.getExtractors()",
            dataType : "json",
            success : function(data) {
            	console.log('Call succedded');
            	
               // $('#test1').text(data.message);
               // setExtractorLists(data);
               setAllExtractorList(data);
                
            },
            error : function(xhr, textStatus, errorThrown) {
                console.log('Make call failed - getAllExtractors' +  errorThrown);
            }
        });
}



function getAllMeasures() {
$.ajax({
            type : 'GET',
            url : "@routes.Admin.getMeasures()",
            dataType : "json",
            success : function(data) {
            	console.log('Call succedded');
            	
              //  $('#test1').text(data.message);
                
                setAllMeasureList(data);
            },
            error : function(xhr, textStatus, errorThrown) {
                console.log('Make call failed - getMeasures' +  errorThrown);
            }
        });
	
}



//set the adapter options, pulled from the versus server
function setAllAdapterList(json){	
	var mimeTypes = "";	
	//var allAdapters = "";
	console.log("=============== top of set all adapter list");
	for(var i=0; i<json.length; i++){
		mimeTypes = json[i].supportedMimeTypes;
		//console.log('length of mimetypes = ' + mimeTypes.length);
		//console.log('****** adapter  name = ' + json[i].name + ', mimeTypes = ' + mimeTypes + '...interfaces = ' + json[i].interfaces);	
		//console.log('mimeTypes.indexOf(p) = ' + mimeTypes.indexOf("p"));
		console.log('. ');	
		//allAdadapters  = allAdapterList+'<option value="'+json[i].id+'" >'+json[i].name+'</option>';			
		allAdapterList.push({name:json[i].name,id:json[i].id,mimeTypes:json[i].supportedMimeTypes, interfaces:json[i].interfaces});			
	}	
	console.log("=============== bottom of set all adapter list");
}


function setAllExtractorList(json){
	console.log("top of set all extractor list");
 	
	for(var i=0; i<json.length; i++){
		//console.log("extractor's name = " + json[i].name + " adapters: " + json[i].supportedAdapters + "  id = " + json[i].id + " feature = " + json[i].supportedFeature );
		console.log(".  ");
			//availableExtractors  = availableExtractors+'<option value="'+json[i].id+'" >'+json[i].name+'</option>';
			allExtractorList.push({name:json[i].name, 
									id:json[i].id, 
									supportedFeature:json[i].supportedFeature, 
									supportedAdapters:json[i].supportedAdapters});					
	}
	console.log("bottom  of set all extractor list");
}


function setAllMeasureList(json){
	console.log("=====top of setall measures");
	for(var i=0; i<json.length; i++){
			console.log(". ");
			//console.log("i = " + i + "  name = " + json[i].name + "  \n     feature type = " + json[i].supportedFeatureType);
			//availableMeasures  = availablePDFMeasures+'<option value="'+json[i].id+'" >'+json[i].name+'</option>';
			allMeasureList.push({name:json[i].name,id:json[i].id,supportedFeatureType:json[i].supportedFeatureType});
	}
	console.log("=====bottom of setall measures")
}


function setFileTypeAndAvailableAdapters(){

	if($("#fileTypeDropDown").val() == "invalid"){
		fileTypeState = false;
	}
	else{
		fileTypeState    = true;
		fileTypeSelected =  $("#fileTypeDropDown").val();
	
		console.log("selected file type: " + fileTypeSelected);
		setShortAdapterList(fileTypeSelected);
		//if (fileTypeSelected.indexOf("image")!=-1){
			//console.log("file is image");
			//setShortAdapterList("image");
		//} else if (fileTypeSelected.indexOf("pdf")!=-1){
			//console.log("file is pdf");
			//setShortAdapterList("pdf");
		//}	
		
		$("#extractorDropDown").html('<option value="invalid">--Extractor--</option>');	
		$("#measureDropDown").html('<option value="invalid">--Measure--</option>');
	}	
}


function setShortAdapterList(type)
{
	console.log('====== setting short adapters list for type ' + type );
	
	var availableAdapters="";
	for(var i=0; i<allAdapterList.length; i++){
		var mimeTypes = allAdapterList[i].mimeTypes;
		
		//console.log('mimeTypes = ' + mimeTypes);
		//console.log('mimeTypes.length = ' + mimeTypes.length);
		
		var bool = false;
		for (var j=0; j< mimeTypes.length; j++){
			console.log('mimeTypes[j] = ' + mimeTypes[j]);
			if (mimeTypes[j].indexOf(type) != -1){
				bool = true;
			}
		}
		
		if (bool) {			
			console.log('match found: adapter  name = ' + allAdapterList[i].name + ', mimeTypes = ' + allAdapterList[i].mimeTypes);		
			availableAdapters  = availableAdapters+'<option value="'+allAdapterList[i].id+'" >'+allAdapterList[i].name+'</option>';			
			shortAdapterList.push(allAdapterList[i]);	
		}	
	}	
	
	$("#adapterDropDown").html('<option value="invalid">--Adapter--</option>'+availableAdapters);
}


function setShortExtractorList(interfacesArray){
	console.log("==================top of setShortExtractorList");// for interfaces = " + interfacesArray);
	
	//interfaces that this adapter is extending
	//var interfacesArray = adapter.interfaces;
	console.log("`````````interfaces array = " + interfacesArray);
	var availableExtractors ="";
	console.log("allExtractorList.length = " + allExtractorList.length);
	for(var i=0; i<allExtractorList.length; i++){
		//console.log("i=" + i);
		//extractor->get supportedAdapters
		var supportedAdaptersArray = allExtractorList[i].supportedAdapters;
		//console.log("        supported adapters = " + supportedAdaptersArray);
		
		//need to find intersection of two arrays - interfaces and supportedAdapters.
		//if intersection is not emptsupported adapters =y then this extractor supports this adapter.
		
		//for i's extractor, go through all the interfaces that adapter is extending and find 
		//which of these interfaces the extractor supports.
		var results = [];
		for (var k = 0; k < interfacesArray.length; k++) {
    		if (supportedAdaptersArray.indexOf(interfacesArray[k]) !== -1) {
    			//console.log("found intersection " + interfacesArray[k]);
        		results.push(interfacesArray[k]);
    		}
		}
		
		if (results.length ==0){
			//console.log("+++no intersection");
		} else {
			//intersection is non empty => this extractor supports this adapter, so add it to the short list.
			//console.log("+++++++intersection has length " + results.length + "...results[0] = " + results[0]);
			availableExtractors  = availableExtractors+'<option value="'+allExtractorList[i].id+'" >'+allExtractorList[i].name+'</option>';			
			shortExtractorList.push(allExtractorList[i]);
		}
		
	}
	//console.log("++++++++availableExtractors = " + availableExtractors);
	$("#extractorDropDown").html('<option value="invalid">--Extractor--</option>'+availableExtractors);
}


function setShortMeasureList(featureType)
{
	console.log('====== setting short measures list for featureType ' + featureType );
	
	var availableMeasures="";
	for(var i=0; i<allMeasureList.length; i++){
		var featureTypes = allMeasureList[i].supportedFeatureType;
		//go through list of all features this measure supports
		//console.log ("feature types = " + featureTypes);
		var bool = false; 		
		for (var j=0; j<featureTypes.length; j++){
		if (featureTypes[j].indexOf(featureType) != -1){
				bool = true;
			}		
		}
		
		if (bool) {			
			//console.log('match found: measure  name = ' + allMeasureList[i].name + ', featureType = ' + allMeasureList[i].supportedFeatureType);		
			availableMeasures  = availableMeasures+'<option value="'+allMeasureList[i].id+'" >'+allMeasureList[i].name+'</option>';	
			//console.log(	"availableMeasures = "  + availableMeasures);	
			shortMeasureList.push(allMeasureList[i]);	
		}			
	}		
	$("#measureDropDown").html('<option value="invalid">--Measure--</option>'+availableMeasures);
}





function setAdapterTypeAndAvailableExtractors(){
	console.log("============================adapter drop down on change: from set adapter state")
	
	var adapterInterfaces =[];
	
	if($("#adapterDropDown").val() == "invalid"){
		adapterState = false;
	}
	else{
		adapterState    = true;
		for( var i=0; i<shortAdapterList.length; i++){
			if($("#adapterDropDown").val() == shortAdapterList[i].id ){
				console.log("AdapterDropdown",$("#adapterDropDown").val());
				console.log("Adapter name selected",shortAdapterList[i].name,"shortAdapterList[i].id=",shortAdapterList[i].id);
				console.log("shortAdapterList[i].interfaces = " + shortAdapterList[i].interfaces);
				adapterInterfaces = shortAdapterList[i].interfaces;
				adapterSelected=shortAdapterList[i].id.split(" ")[1];
				//adapterSelected=shortAdapterList[i];
				console.log("-=-=-=-=-=-=-=-=-=-=-=-=-=adapterSelected = " + adapterSelected);
			}
		}
		
		setShortExtractorList(adapterInterfaces);
	}
	//toggleSubmitButton();
}

function setExtractorTypeAndAvailableMeasures(){

	var supportedFeature;
	
	if($("#extractorDropDown").val() == "invalid"){
		extractorState = false;
	}
	else{
		extractorState    = true;
		for( var i=0; i<shortExtractorList.length; i++){
			if($("#extractorDropDown").val() == shortExtractorList[i].id ){
				//console.log("extractorList",$("#extractorDropDown").val());
				console.log("Extractor name selected",shortExtractorList[i].name,"shortExtractorList[i].id=",shortExtractorList[i].id);
				supportedFeature = shortExtractorList[i].supportedFeature;
				extractorSelected=shortExtractorList[i].id.split(" ")[1];
			}
		}
		//console.log("selected extractor supports feature: ",supportedFeature);
		//console.log(extractorList[1]);
		setShortMeasureList(supportedFeature);
	}
	//toggleSubmitButton();
}


function setMeasureType(){
	console.log("=====top of setMeasureType()");
	if($("#measureDropDown").val() == "invalid"){
		console.log("measure not selected");
		measureState = false;
	}
	else{
		console.log("measure is selected, val = " + $("#measureDropDown").val());
		measureState    = true;
		for( var i=0; i<shortMeasureList.length; i++){
			//console.log("shortMeasureList[i].id = " + shortMeasureList[i].id);
			if($("#measureDropDown").val() == shortMeasureList[i].id ){
				//console.log("shortMeasureList",$("#measureDropDown").val());
				console.log("Measure name selected: ",shortMeasureList[i].name," shortMeasureList[i].id=",shortMeasureList[i].id);
				measureSelected=shortMeasureList[i].id.split(" ")[1];
				console.log("-=-=-=-=-=-=-=-=-=measureSelected = " + measureSelected);
			}
		}
		//console.log("MeasureSupportedFeatureType:",measureSupportedFeatureType);
		
	}
	//toggleSubmitButton();
}


//Indexer set
function getIndexers() {
$.ajax({
            type : 'GET',
            url : "@routes.Admin.getIndexers()",
            dataType : "json",
            success : function(data) {
            	console.log('Call succedded');
            	
              //  $('#test1').text(data.message);
                
                setIndexerList(data);
            },
            error : function(xhr, textStatus, errorThrown) {
                console.log('Make call failed -getIndexers ' +  errorThrown);
            }
        });
	
}


function setIndexerList(json){
	var availableIndexers = "";
	for(var i=0; i<json.length; i++){
		availableIndexers = availableIndexers+'<option value="'+json[i].id+'" >'+json[i].name+'</option>';
		//adapterList[i] = {id:json[i].id,mimeTypes:json[i].supportedMimeTypes};
	    indexerList[i] = {name:json[i].name,id:json[i].id};
	}
	$("#indexer").html('<option value="invalid">--Indexer--</option>'+availableIndexers);
}


function setIndexerState(){
	if($("#indexer").val() == "invalid"){
		indexerState = false;
	}
	else{
		indexerState    = true;
		for( var i=0; i<indexerList.length; i++){
			if($("#indexer").val() == indexerList[i].id ){
				console.log("indexerList",$("#indexer").val());
				console.log("Indexer name selected: ",indexerList[i].name," indexerList[i].id=",indexerList[i].id);
				//measureSupportedFeatureType = measureList[i].supportedFeatureType;
				indexerselected=indexerList[i].id;
			}
		}
		//console.log("MeasureSupportedFeatureType:",measureSupportedFeatureType);
		console.log(indexerselected);
	}
	//toggleSubmitButton();
}




function getIndexes() {
	$.ajax({
            type : 'GET',
            url : "@routes.Admin.getIndexes()",
            dataType : "json",
            success : function(data) {
            	console.log('Call succedded');
            	
              //  $('#test1').text(data.message);
                
                setIndexList(data);
            },
            error : function(xhr, textStatus, errorThrown) {
                console.log('Make call failed -getIndexes ' +  errorThrown);
            }
        });
	
}


function setIndexList(json){
	var availableIndexes = "";
	for(var i=0; i<json.length; i++){
		availableIndexes = availableIndexes+'<option value="'+json[i].indexID+'" >'+json[i].indexID+'</option>';
		indexList[i] = {indexID:json[i].indexID,MIMEtype:json[i].MIMEtype,Extractor:json[i].Extractor, Measure:json[i].Measure,Indexer:json[i].Indexer};
	}
	$("#index").html('<option value="invalid">--Index--</option>'+availableIndexes);
	$("#indexDel").html('<option value="invalid">--Index--</option>'+availableIndexes);
}

function setIndexState(){
	if($("#index").val() == "invalid"){
		indexState = false;
	}
	else{
		indexState    = true;
		for( var i=0; i<indexList.length; i++){
			if($("#index").val() == indexList[i].indexID ){
				console.log("indexList",$("#index").val());
				console.log("Index name selected: ",indexList[i].indexID);
				
				indexselected=indexList[i].indexID;
			}
		}
		
		console.log("indexselected=",indexselected);
	}
	
}

function setIndexDelState(){
	if($("#indexDel").val() == "invalid"){
		indexState = false;
	}
	else{
		indexState    = true;
		for( var i=0; i<indexList.length; i++){
			if($("#indexDel").val() == indexList[i].indexID ){
				console.log("indexList",$("#indexDel").val());
				console.log("Index name selected: ",indexList[i].indexID);
				
				indexselected=indexList[i].indexID;
			}
		}
		
		console.log("indexselected=",indexselected);
	}
	
}


var createBtn=document.getElementById('create');
    createBtn.onclick=function(evt){
    console.log("I am inside create function");
    console.log("adapterSelected = " + adapterSelected + ", extractor = " + extractorSelected );
           console.log(", measure = " + measureSelected   + ", indexer = " + indexerselected);
           
     // var fdata="adapter="+adapterSelected+"&extractor="+extractorSelected+"&measure="+measureSelected+"&indexer="+indexerselected;
    	$.ajax({
            type : 'POST',
            url : "@routes.Admin.createIndex()",
            contentType: "application/json",
           // dataType : "json",
           
             data:JSON.stringify({"adapter":adapterSelected,"extractor":extractorSelected,"measure":measureSelected,"indexer":indexerselected}),
           
            success : function(data1) {
            	//console.log('Call succedded');
            	
              //  $('#test1').text(data1.message);
                //console.log("data1:", data1);
                console.log("Sucessfully created");
                $('#createIndex').text("Sucessfully created index");// with id:  "+ data1);
                //alert("Sucessfully created");
            },
            error : function(xhr, textStatus, errorThrown) {
            	console.error("The following error occured: "+textStatus, errorThrown);
                var errMsg = "You must be logged in to create an index.";                    
                if (!checkErrorAndRedirect(xhr, errMsg)) {
                    alert("The index was not created due to : " + errorThrown);
                }                
            }
        });
        
    }	
    
    
    			
	var buildBtn=document.getElementById('build');
    buildBtn.onclick=function(evt){
    
    	console.log("I am inside Build click function", indexselected);
    
    	var id=indexselected;
    
    	var request=jsRoutes.controllers.Admin.buildIndex(id).ajax({
    		   type:'POST'
    	});
    	
    	request.done(function (response, textStatus, jqXHR){
    	    $('#buildIndex').text(response);
    	    console.log("Response =" + response);
    	});
    	
    	request.fail(function (jqXHR, textStatus, errorThrown){         
            console.error("The following error occured: "+textStatus, errorThrown);
            var errMsg = "You must be logged in to build an index.";                    
            if (!checkErrorAndRedirect(jqXHR, errMsg)) {
                alert("The index was not built due to : " + errorThrown);
            }
        });
     }						
    	
var listBtn=document.getElementById('list');
    listBtn.onclick=function(evt){
    
    	console.log("I am inside list click function");
    
    	
    
    	var request=jsRoutes.controllers.Admin.getIndexes().ajax({
   					 type:'GET',
   					 dataType: "json",
    				});
    	
    				request.done(function (json, textStatus, jqXHR){
						console.log("Response =" + json);
						var availableIndexes = "";
						var tab=[];
						tab.push('<table id="inputTable" class="table table-bordered table-striped" style="display:inline;"><th>IndexId</th><th>Extractor</th><th>Measure</th><th>Indexer</th>');
                        

						for(var i=0; i<json.length; i++){
								//availableIndexes = availableIndexes+'<option value="'+json[i].indexID+'" >'+json[i].indexID+'</option>';
							
								indexList[i] = {indexID:json[i].indexID,MIMEtype:json[i].MIMEtype,Extractor:json[i].Extractor, Measure:json[i].Measure,Indexer:json[i].Indexer};
									tab.push('<tr id=i >',
							      	'<td>', json[i].indexID, '</td>',
							      	'<td>',json[i].Extractor,' </td>',
							      	'<td>',json[i].Measure,'</td>',
							      	'<td>',json[i].Indexer,'</td>',
							      	'</tr>');
							
							}
						tab.push('</table>');
						document.getElementById('list1').innerHTML=tab.join('');
					  // $("#list1").html(tab);
					
					
   					 });
    				
    				request.fail(function (jqXHR, textStatus, errorThrown){         
                        console.error("The following error occured: "+textStatus, errorThrown);
                        var errMsg = "You must be logged in to list the available indexes.";                    
                        if (!checkErrorAndRedirect(jqXHR, errMsg)) {
                            alert("The indexes were not listed due to : " + errorThrown);
                        }
                    });
    	    }		


var deleteBtn=document.getElementById('delete');
    deleteBtn.onclick=function(evt){
 
    	var id=indexselected;

    var id=indexselected;

    	console.log("I am inside delete click function");
    	var request=jsRoutes.controllers.Admin.deleteIndex(id).ajax({
   					 type:'DELETE'
    				});
    	
    				request.done(function (response, textStatus, jqXHR){
    				$('#deleteIndex').text(response);
					console.log("Response =" + response);
   					 });
    				
    				request.fail(function (jqXHR, textStatus, errorThrown){         
                        console.error("The following error occured: "+textStatus, errorThrown);
                        var errMsg = "You must be logged in to delete an index.";                    
                        if (!checkErrorAndRedirect(jqXHR, errMsg)) {
                            alert("The index was not deleted due to : " + errorThrown);
                        }
                    });
    }		
    
   var deleteAllBtn=document.getElementById('deleteAll');
    deleteAllBtn.onclick=function(evt){
    
    	console.log("I am inside delete All click function");
    	
    	var request=jsRoutes.controllers.Admin.deleteAllIndexes().ajax({
   					 type:'DELETE'
    				});
    	
    				request.done(function (response, textStatus, jqXHR){
    				$('#deleteAllIndex').text(response);
					console.log("Response =" + response);
   					 });
    				
    				request.fail(function (jqXHR, textStatus, errorThrown){         
                        console.error("The following error occured: "+textStatus, errorThrown);
                        var errMsg = "You must be logged in to delete all indexes.";                    
                        if (!checkErrorAndRedirect(jqXHR, errMsg)) {
                            alert("The indexes were not deleted due to : " + errorThrown);
                        }
                    });
    
    }	 
   
   /*$('#testButton').click(function(evt) {
        $('#errors').hide();
        console.log("inside Test button");
        $.ajax({
            type : 'GET',
            url : "@routes.Admin.test()",
            dataType : "json",
            success : function(data) {
            	console.log('Test Call succedded');
                $('#test1').text(data.message);
            },
            error : function(xhr, textStatus, errorThrown) {
                console.log('Make call failed ' +  errorThrown);
            }
        });
        return false;
    });*/
  /* $('#secureTestButton').click(function(evt) {
       $('#errors').hide();
       $.ajax({
           type : 'GET',
           url : "@routes.Admin.secureTest()",
           dataType : "json",
           success : function(data) {
           	console.log('Call succedded');
               $('#test1').text(data.message);
           },
           error : function(xhr, textStatus, errorThrown) {
               console.log('Make call failed' +  errorThrown);
               $('#test1').text(errorThrown);
           }
       });
       return false;
   });*/
   
</script>
}
