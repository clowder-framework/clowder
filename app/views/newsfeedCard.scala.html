@(event: models.Event)(implicit user: Option[models.User] = None)
@linkForObject(obj_type: String, obj_id: Option[UUID], obj_name: Option[String]) = {
  @obj_type match {
    case "file" => {
      file: <a href="@routes.Files.file(obj_id.get)">@obj_name.get</a>
    }
    case "dataset" => {
      dataset: <a href="@routes.Datasets.dataset(obj_id.get)">@obj_name.get</a>
    }
    case "collection" => {
      collection: <a href="@routes.Collections.collection(obj_id.get)">@obj_name.get</a>
    }
    case "user" => {
      user: <a href="@routes.Profile.viewProfileUUID(obj_id.get)">@obj_name.get</a>
    }
    case "space" => {
      space: <a href="@routes.Spaces.getSpace(obj_id.get)">@obj_name.get</a>
    }
    case "curation" => {
      space: <a href="@routes.CurationObjects.getCurationObject(obj_id.get)">@obj_name.get</a>
    }
    case "subcollection" => {
      sub collection: <a href="@routes.Collections.collection(obj_id.get)">@obj_name.get</a> from collection:
      <a href="@routes.Collections.collection(event.source_id.get)">@event.source_name.get</a>
    }
    case _ => {
      @obj_type: @obj_name.get
    }
  }
}

@actionTextForEvent(event_type_prefix: String) = @{
  event_type_prefix match {
    case "follow" => "is now following "
    case "unfollow" => "stopped following "
    case "upload" => "uploaded "
    case "create" => "created "
    case "delete" => "deleted "
    case "edit" => "edited their comment to "
    case "download" => "downloaded "
    case "postrequest" => "requested access to"
    case _ => event_type_prefix
  }
}

@actionTextsForEvent(event_type_prefix: String) = @{
  event_type_prefix match {
    case "add" => List("added ", " to ")
    case "attach" => List("attached ", " to ")
    case "remove" => List("removed ", " from ")
    case "detach" => List("detached ", " from ")
  }
}

@event.event_type match {
  case "edit_profile" => {
    edited their <a href="@routes.Profile.viewProfileUUID(event.user.id)">profile</a>
  }
  case "update_dataset_information" => {
    updated information for @linkForObject("dataset", event.object_id, event.object_name)
  }
  case "update_file_information" => {
    updated information for @linkForObject("file", event.object_id, event.object_name)
  }
  case "update_collection_information" => {
    updated information for @linkForObject("collection", event.object_id, event.object_name)
  }
  case "update_curation_information" => {
    updated information for @linkForObject("curation", event.object_id, event.object_name)
  }
  case "set_note_file" => {
    set note for @linkForObject("file", event.object_id, event.object_name)
  }
  case "add_user_to_space" => {
    has added @(event.targetuser.getOrElse(User.anonymous.getMiniUser).fullName) as a user to @linkForObject("space", event.object_id, event.object_name)
  }
  case "remove_user_from_space" => {
    has removed @(event.targetuser.getOrElse(User.anonymous.getMiniUser).fullName) as a user from @linkForObject("space", event.object_id, event.object_name)
  }
  case "added_folder" => {
    has created a folder in @linkForObject("dataset", event.object_id, event.object_name)
  }
  case "deleted_folder" => {
    has deleted a folder from @linkForObject("dataset", event.object_id, event.object_name)
  }
  case "updated_folder" => {
    has updated a folder in @linkForObject("dataset", event.object_id, event.object_name)
  }
  case "add_file" => {
    has added a file to @linkForObject("dataset", event.object_id, event.object_name)
  }
  case "add_file_folder" => {
    has added a file to a folder within @linkForObject("dataset", event.object_id, event.object_name)
  }
  case "add_sub_collection" => {
    added sub @linkForObject("collection", event.object_id, event.object_name) to
    @linkForObject("collection", event.source_id, event.source_name)
  }
  case "addMetadata_file" | "addMetadata_dataset" => {
    added metadata to @linkForObject(
      event.event_type.substring(event.event_type.indexOf('_')+1),
      event.object_id,
      event.object_name
    )
  }
  case "acceptrequest_space" => {
    accepted @(event.targetuser.getOrElse(User.anonymous.getMiniUser).fullName)'s request to
    @linkForObject("space", event.object_id, event.object_name)
  }
  case "rejectrequest_space" => {
    rejected  @(event.targetuser.getOrElse(User.anonymous.getMiniUser).fullName)'s  request to
    @linkForObject("space", event.object_id, event.object_name)
  }
  case _ => {
    @defining(event.event_type.split("_")) { event_type_split =>
      @event_type_split.length match {
        case 2 => {
          @if(event_type_split(0) == "comment"){
            commented <font color="black"><em>@event.object_name</em></font> on @linkForObject("file", event.source_id, event.source_name)
          }else{
            @actionTextForEvent(event_type_split(0)) @linkForObject(event_type_split(1), event.object_id, event.object_name)
          }
        }
        case 3 => {
          @defining(actionTextsForEvent(event_type_split(0))) { texts =>
            @if(event.event_type.indexOf("tag")>=0){
              @texts(0) @linkForObject(event_type_split(1), event.object_id, Option("")) @texts(1) @linkForObject(event_type_split(2), event.object_id, event.object_name)
            }else {
              @texts(0) @linkForObject(event_type_split(1), event.object_id, event.object_name) @texts(1) @linkForObject(event_type_split(2), event.source_id, event.source_name)
            }
          }
        }
      }
    }
  }
}
